---
title: "è³‡æ–™å·¥ç¨‹åŸºç¤ (Data Engineering Fundamentals)"
type: topic
status: active
created: 2025-11-11
project: LearningMap
author: maple
tags:
  - data-engineering
  - json
  - etl
  - database
audience:
  - all
summary: |
  è³‡æ–™æ ¼å¼ï¼ˆJSON/CSVï¼‰ã€è³‡æ–™åº«åŸºç¤ã€ETL æµç¨‹èˆ‡è³‡æ–™å……å¯¦æŠ€è¡“ã€‚
---

# è³‡æ–™å·¥ç¨‹åŸºç¤ (Data Engineering Fundamentals)

---

## æ¦‚è¿°

æœ¬æ–‡æ¶µè“‹è³‡æ–™æ ¼å¼ã€è³‡æ–™åº«åŸºç¤ï¼Œä»¥åŠè³‡æ–™è™•ç†çš„æ ¸å¿ƒæµç¨‹ï¼ˆETL èˆ‡è³‡æ–™å……å¯¦ï¼‰ã€‚

**å­¸ç¿’ç›®æ¨™**:
- ç†è§£å¸¸è¦‹è³‡æ–™æ ¼å¼åŠå…¶ä½¿ç”¨å ´æ™¯
- æŒæ¡ JSON Schema çš„è³‡æ–™é©—è­‰æ¦‚å¿µ
- ç†è§£ ETL æµç¨‹èˆ‡è³‡æ–™å……å¯¦ï¼ˆEnrichï¼‰æŠ€è¡“

---

## ç›®éŒ„

- [1. è³‡æ–™çµæ§‹èˆ‡æ ¼å¼](#1-è³‡æ–™çµæ§‹èˆ‡æ ¼å¼)
  - [1.1 JSON](#11-json)
  - [1.2 JSON Schema](#12-json-schema)
  - [1.3 CSV](#13-csv)
  - [1.4 XML/YAML ç°¡ä»‹](#14-xmlyaml-ç°¡ä»‹)
- [2. è³‡æ–™åº«åŸºç¤](#2-è³‡æ–™åº«åŸºç¤)
  - [2.1 é—œè¯å¼è³‡æ–™åº«æ ¸å¿ƒæ¦‚å¿µ](#21-é—œè¯å¼è³‡æ–™åº«æ ¸å¿ƒæ¦‚å¿µ)
  - [2.2 æ­£è¦åŒ– vs éæ­£è¦åŒ–](#22-æ­£è¦åŒ–-vs-éæ­£è¦åŒ–)
  - [2.3 NoSQL ç°¡ä»‹](#23-nosql-ç°¡ä»‹)
- [3. è³‡æ–™è™•ç†æµç¨‹](#3-è³‡æ–™è™•ç†æµç¨‹)
  - [3.1 ETL (Extract, Transform, Load)](#31-etl-extract-transform-load)
  - [3.2 Enrich (è³‡æ–™å……å¯¦)](#32-enrich-è³‡æ–™å……å¯¦)
  - [3.3 åœ¨ LuminNexus çš„æ‡‰ç”¨](#33-åœ¨-luminnexus-çš„æ‡‰ç”¨)
- [4. å¸¸è¦‹å•é¡Œ](#4-å¸¸è¦‹å•é¡Œ)

---

## 1. è³‡æ–™çµæ§‹èˆ‡æ ¼å¼

### 1.1 JSON

**åŸºæœ¬èªæ³•**
```json
{
  "name": "Vitamin C",
  "dosage": 1000,
  "unit": "mg",
  "vegan": true
}
```

**ä½•æ™‚ä½¿ç”¨ï¼Ÿ**
- API è«‹æ±‚èˆ‡å›æ‡‰
- é…ç½®æª”æ¡ˆ
- çµæ§‹åŒ–è³‡æ–™å„²å­˜

**æœ€ä½³å¯¦è¸**
- ä½¿ç”¨ä¸€è‡´çš„å‘½åè¦ç¯„
- é¿å…éåº¦å·¢ç‹€ï¼ˆä¸è¶…é 3-4 å±¤ï¼‰
- ä½¿ç”¨ JSON Schema é©—è­‰

---

### 1.2 JSON Schema

**ä»€éº¼æ˜¯ JSON Schemaï¼Ÿ**
- æè¿° JSON è³‡æ–™çµæ§‹çš„è¦ç¯„
- ç”¨æ–¼è³‡æ–™é©—è­‰ã€æ–‡æª”ç”Ÿæˆã€æ¸¬è©¦æ¡ˆä¾‹è¨­è¨ˆ

**Schema ç¯„ä¾‹**
```json
{
  "type": "object",
  "properties": {
    "name": {"type": "string", "minLength": 1},
    "dosage": {"type": "number", "minimum": 0},
    "unit": {"type": "string", "enum": ["mg", "g", "mcg"]}
  },
  "required": ["name", "dosage", "unit"]
}
```

**ä½¿ç”¨å ´æ™¯**
- API è¦æ ¼å®šç¾©
- è¼¸å…¥è³‡æ–™é©—è­‰
- è‡ªå‹•ç”Ÿæˆæ¸¬è©¦æ¡ˆä¾‹

**åœ¨ LuminNexus çš„æ‡‰ç”¨**
- MDFO Query çš„çµæ§‹é©—è­‰
- API è«‹æ±‚/å›æ‡‰çš„æ ¼å¼æª¢æŸ¥
- åƒè€ƒæ–‡ä»¶ï¼š`spec/Canonical_Query_Schema.md`

---

### 1.3 CSV

**å„ªé»èˆ‡ç¼ºé»**
- âœ… ç°¡å–®æ˜“æ‡‚ã€Excel æ”¯æ´
- âŒ ä¸æ”¯æ´è¤‡é›œçµæ§‹ã€ç·¨ç¢¼å•é¡Œ

**ä½¿ç”¨æ™‚æ©Ÿ**
- âœ… ç°¡å–®è¡¨æ ¼è³‡æ–™
- âœ… èˆ‡éæŠ€è¡“äººå“¡å”ä½œ
- âŒ è¤‡é›œè³‡æ–™çµæ§‹ï¼ˆç”¨ JSONï¼‰

**å¸¸è¦‹å•é¡Œè™•ç†**
```python
# å•é¡Œï¼šæ¬„ä½ä¸­åŒ…å«é€—è™Ÿ
"Product Name","Price"
"Vitamin C, 1000mg","25.99"  # éœ€è¦ç”¨å¼•è™ŸåŒ…ä½

# å•é¡Œï¼šç·¨ç¢¼éŒ¯èª¤
import pandas as pd
df = pd.read_csv('data.csv', encoding='utf-8')
```

---

### 1.4 XML/YAML ç°¡ä»‹

**XML (Extensible Markup Language)**
- æ¨™è¨˜å¼èªè¨€ï¼Œé©åˆæ–‡ä»¶å‹è³‡æ–™
- ç”¨æ–¼ï¼šè¨­å®šæª”ã€Web Services (SOAP)

**YAML (YAML Ain't Markup Language)**
- äººé¡å‹å–„çš„è³‡æ–™åºåˆ—åŒ–æ ¼å¼
- ç”¨æ–¼ï¼šé…ç½®æª” (Docker Compose, Kubernetes, CI/CD)

**é¸æ“‡å»ºè­°**
- ğŸ† API è³‡æ–™äº¤æ›ï¼šJSON
- ğŸ“Š è¡¨æ ¼è³‡æ–™ï¼šCSV
- âš™ï¸ é…ç½®æª”ï¼šYAML
- ğŸ“„ æ–‡ä»¶å‹è³‡æ–™ï¼šXML

---

## 2. è³‡æ–™åº«åŸºç¤

> ğŸ“š æ­¤ç« ç¯€ä½œç‚ºè£œå……è³‡æ–™ï¼Œä¸æ·±å…¥å¯¦ä½œç´°ç¯€

### 2.1 é—œè¯å¼è³‡æ–™åº«æ ¸å¿ƒæ¦‚å¿µ

**æ ¸å¿ƒå…ƒç´ **
- **è¡¨æ ¼ (Table)**: è³‡æ–™çš„å®¹å™¨
- **ä¸»éµ (Primary Key)**: å”¯ä¸€è­˜åˆ¥æ¯ä¸€ç­†è³‡æ–™
- **å¤–éµ (Foreign Key)**: é€£çµä¸åŒè¡¨æ ¼çš„é—œè¯
- **ç´¢å¼• (Index)**: åŠ é€ŸæŸ¥è©¢çš„è³‡æ–™çµæ§‹

**åŸºæœ¬ SQL æ“ä½œ**
```sql
-- SELECT: æŸ¥è©¢è³‡æ–™
SELECT name, dosage FROM products WHERE category = 'Vitamin';

-- WHERE: ç¯©é¸æ¢ä»¶
SELECT * FROM products WHERE price > 20;

-- JOIN: é€£çµå¤šå€‹è¡¨æ ¼
SELECT p.name, c.category_name
FROM products p
INNER JOIN categories c ON p.category_id = c.id;

-- GROUP BY: åˆ†çµ„çµ±è¨ˆ
SELECT category, COUNT(*) as product_count
FROM products
GROUP BY category;
```

**JOIN é¡å‹**
```
INNER JOIN: åªè¿”å›å…©é‚Šéƒ½æœ‰çš„è³‡æ–™
LEFT JOIN:  è¿”å›å·¦è¡¨å…¨éƒ¨ + å³è¡¨åŒ¹é…çš„
RIGHT JOIN: è¿”å›å³è¡¨å…¨éƒ¨ + å·¦è¡¨åŒ¹é…çš„
FULL JOIN:  è¿”å›å…©é‚Šå…¨éƒ¨è³‡æ–™
```

---

### 2.2 æ­£è¦åŒ– vs éæ­£è¦åŒ–

**æ­£è¦åŒ– (Normalization)**
- ç›®çš„ï¼šæ¶ˆé™¤è³‡æ–™å†—é¤˜ã€é¿å…æ›´æ–°ç•°å¸¸
- æ–¹æ³•ï¼šå°‡è³‡æ–™æ‹†åˆ†æˆå¤šå€‹è¡¨æ ¼ï¼Œç”¨å¤–éµé—œè¯
- å„ªé»ï¼šç¯€çœç©ºé–“ã€ç¶­è­·ä¸€è‡´æ€§
- ç¼ºé»ï¼šæŸ¥è©¢éœ€è¦å¤šæ¬¡ JOINï¼Œæ•ˆèƒ½è¼ƒæ…¢

**éæ­£è¦åŒ– (Denormalization)**
- ç›®çš„ï¼šæå‡æŸ¥è©¢æ•ˆèƒ½
- æ–¹æ³•ï¼šä¿ç•™éƒ¨åˆ†å†—é¤˜è³‡æ–™ï¼Œæ¸›å°‘ JOIN
- å„ªé»ï¼šæŸ¥è©¢å¿«é€Ÿ
- ç¼ºé»ï¼šæ›´æ–°è¤‡é›œã€è³‡æ–™å¯èƒ½ä¸ä¸€è‡´

**æ¬Šè¡¡è€ƒé‡**

| æƒ…å¢ƒ | å»ºè­° |
|------|------|
| å¯«å…¥é »ç¹ã€æŸ¥è©¢ç°¡å–® | æ­£è¦åŒ– |
| è®€å–é »ç¹ã€æŸ¥è©¢è¤‡é›œ | é©åº¦éæ­£è¦åŒ– |
| è³‡æ–™ä¸€è‡´æ€§è¦æ±‚é«˜ | æ­£è¦åŒ– |
| æ•ˆèƒ½è¦æ±‚é«˜ | éæ­£è¦åŒ– + å¿«å– |

---

### 2.3 NoSQL ç°¡ä»‹

**ä»€éº¼æ˜¯ NoSQLï¼Ÿ**
- Not Only SQL
- éé—œè¯å¼è³‡æ–™åº«
- é©åˆå¤§è¦æ¨¡ã€é«˜ä½µç™¼ã€å½ˆæ€§çµæ§‹çš„è³‡æ–™

**å¸¸è¦‹é¡å‹**

1. **Document Database** (æ–‡ä»¶å‹)
   - ä¾‹ï¼šMongoDB, CouchDB
   - å„²å­˜ JSON-like æ–‡ä»¶
   - é©åˆï¼šCMS, ç”¢å“ç›®éŒ„

2. **Key-Value Store** (éµå€¼å°)
   - ä¾‹ï¼šRedis, DynamoDB
   - è¶…å¿«é€Ÿè®€å¯«
   - é©åˆï¼šå¿«å–ã€Session å„²å­˜

3. **Graph Database** (åœ–å½¢è³‡æ–™åº«)
   - ä¾‹ï¼šNeo4j, ArangoDB
   - å„²å­˜ç¯€é»èˆ‡é—œä¿‚
   - é©åˆï¼šç¤¾äº¤ç¶²è·¯ã€çŸ¥è­˜åœ–è­œ

**ä½•æ™‚ä½¿ç”¨ NoSQLï¼Ÿ**
- âœ… è³‡æ–™çµæ§‹å½ˆæ€§ï¼ˆSchema-lessï¼‰
- âœ… éœ€è¦æ°´å¹³æ“´å±•ï¼ˆHorizontal Scalingï¼‰
- âœ… é«˜ä½µç™¼è®€å¯«
- âœ… éçµæ§‹åŒ–/åŠçµæ§‹åŒ–è³‡æ–™
- âŒ éœ€è¦è¤‡é›œçš„é—œè¯æŸ¥è©¢ï¼ˆç”¨ SQLï¼‰
- âŒ å¼· ACID äº¤æ˜“éœ€æ±‚ï¼ˆç”¨ SQLï¼‰

---

## 3. è³‡æ–™è™•ç†æµç¨‹

### 3.1 ETL (Extract, Transform, Load)

**ä»€éº¼æ˜¯ ETLï¼Ÿ**

ETL æ˜¯è³‡æ–™å·¥ç¨‹çš„æ ¸å¿ƒæµç¨‹ï¼Œå°‡è³‡æ–™å¾ä¾†æºç³»çµ±æ¬ç§»åˆ°ç›®æ¨™ç³»çµ±çš„éç¨‹ã€‚

**æµç¨‹åœ–**
```mermaid
graph LR
    A[ä¾†æºç³»çµ±] -->|Extract<br/>æå–| B[è³‡æ–™ç®¡é“]
    B -->|Transform<br/>è½‰æ›| C[è³‡æ–™ç®¡é“]
    C -->|Load<br/>è¼‰å…¥| D[ç›®æ¨™ç³»çµ±]

    style A fill:#e1f5ff
    style D fill:#e7f7e7
    style B fill:#fff4e1
    style C fill:#fff4e1
```

#### **E - Extract (æå–)**

å¾ä¾†æºç³»çµ±è®€å–è³‡æ–™

**å¸¸è¦‹ä¾†æº**ï¼š
- ğŸŒ Web API
- ğŸ—„ï¸ è³‡æ–™åº«
- ğŸ“„ æª”æ¡ˆ (CSV, JSON, XML)
- ğŸ•·ï¸ ç¶²é çˆ¬èŸ²

**ç¯„ä¾‹**ï¼š
```python
# å¾ API æå–è³‡æ–™
import requests
response = requests.get('https://api.example.com/products')
raw_data = response.json()

# å¾ CSV æå–è³‡æ–™
import pandas as pd
df = pd.read_csv('products.csv')
```

---

#### **T - Transform (è½‰æ›)**

è³‡æ–™æ¸…æ´—ã€æ ¼å¼è½‰æ›ã€æ¥­å‹™é‚è¼¯è™•ç†

**å¸¸è¦‹è½‰æ›æ“ä½œ**ï¼š
- ğŸ§¹ **è³‡æ–™æ¸…æ´—**: ç§»é™¤é‡è¤‡ã€è™•ç†ç¼ºå¤±å€¼
- ğŸ”„ **æ ¼å¼è½‰æ›**: æ—¥æœŸæ ¼å¼ã€å–®ä½è½‰æ›
- ğŸ·ï¸ **è³‡æ–™æ¨™è¨»**: åˆ†é¡ã€æ¨™ç±¤åŒ–
- ğŸ§® **è¨ˆç®—æ¬„ä½**: è¡ç”Ÿæ–°æ¬„ä½
- ğŸ”— **è³‡æ–™æ•´åˆ**: åˆä½µå¤šå€‹ä¾†æº

**ç¯„ä¾‹**ï¼š
```python
# æ¸…æ´—è³‡æ–™
df = df.drop_duplicates()  # ç§»é™¤é‡è¤‡
df['price'] = df['price'].fillna(0)  # å¡«è£œç¼ºå¤±å€¼

# æ ¼å¼è½‰æ›
df['date'] = pd.to_datetime(df['date'])  # è½‰æ›æ—¥æœŸ
df['dosage_mg'] = df['dosage_g'] * 1000  # å–®ä½è½‰æ›

# è³‡æ–™æ¨™è¨»
df['price_level'] = df['price'].apply(
    lambda x: 'high' if x > 50 else 'low'
)
```

---

#### **L - Load (è¼‰å…¥)**

å°‡è™•ç†å¾Œçš„è³‡æ–™å¯«å…¥ç›®æ¨™ç³»çµ±

**å¸¸è¦‹ç›®æ¨™**ï¼š
- ğŸ—„ï¸ è³‡æ–™å€‰å„² (Data Warehouse)
- ğŸ—ƒï¸ è³‡æ–™åº« (MySQL, PostgreSQL)
- ğŸ“Š åˆ†æå¹³å° (BigQuery, Redshift)
- ğŸ“ æª”æ¡ˆç³»çµ±

**ç¯„ä¾‹**ï¼š
```python
# è¼‰å…¥åˆ°è³‡æ–™åº«
from sqlalchemy import create_engine
engine = create_engine('postgresql://user:pass@localhost/db')
df.to_sql('products', engine, if_exists='append')

# è¼‰å…¥åˆ° CSV
df.to_csv('cleaned_products.csv', index=False)
```

---

#### **ETL vs ELT çš„å·®ç•°**

**ETL**: Extract â†’ Transform â†’ Load
- å…ˆè½‰æ›ï¼Œå†è¼‰å…¥
- é©åˆï¼šè³‡æ–™é‡å°ã€ç›®æ¨™ç³»çµ±æ•ˆèƒ½æœ‰é™
- å·¥å…·ï¼šTalend, Informatica, Apache Airflow

**ELT**: Extract â†’ Load â†’ Transform
- å…ˆè¼‰å…¥ï¼Œåœ¨ç›®æ¨™ç³»çµ±å…§è½‰æ›
- é©åˆï¼šé›²ç«¯è³‡æ–™å€‰å„²ï¼ˆé‹ç®—èƒ½åŠ›å¼·ï¼‰
- å·¥å…·ï¼šdbt, BigQuery, Snowflake

---

### 3.2 Enrich (è³‡æ–™å……å¯¦)

**ä»€éº¼æ˜¯è³‡æ–™å……å¯¦ï¼Ÿ**

ç‚ºç¾æœ‰è³‡æ–™è£œå……é¡å¤–è³‡è¨Šï¼Œæå‡è³‡æ–™çš„å®Œæ•´æ€§èˆ‡åƒ¹å€¼ã€‚

**æµç¨‹åœ–**
```mermaid
graph LR
    A[åŸå§‹è³‡æ–™] --> B[å……å¯¦è™•ç†]
    C[å¤–éƒ¨è³‡æ–™æº] --> B
    D[è¦å‰‡å¼•æ“] --> B
    B --> E[å¢å¼·è³‡æ–™]

    style A fill:#e1f5ff
    style E fill:#e7f7e7
    style B fill:#fff4e1
```

---

#### **å……å¯¦ä¾†æº**

1. **å¤–éƒ¨ API**
   - åœ°ç†ç·¨ç¢¼æœå‹™ï¼ˆåœ°å€ â†’ ç¶“ç·¯åº¦ï¼‰
   - ç”¢å“è³‡è¨Š APIï¼ˆæ¢ç¢¼ â†’ ç”¢å“è©³æƒ…ï¼‰
   - åˆ†é¡æœå‹™ï¼ˆæ–‡å­— â†’ é¡åˆ¥æ¨™ç±¤ï¼‰

2. **åƒè€ƒè³‡æ–™è¡¨ (Reference Tables)**
   - ç”¢å“åˆ†é¡å°ç…§è¡¨
   - æˆåˆ†è³‡æ–™åº«
   - å“ç‰Œè³‡è¨Šè¡¨

3. **è¨ˆç®—æ¬„ä½**
   - è¡ç”ŸæŒ‡æ¨™ï¼ˆä¾‹ï¼šBMI = é«”é‡ / èº«é«˜Â²ï¼‰
   - çµ±è¨ˆå€¼ï¼ˆå¹³å‡ã€ç¸½å’Œã€æ’åï¼‰

4. **è¦å‰‡å¼•æ“ (Business Rules)**
   - è‡ªå‹•åˆ†é¡é‚è¼¯
   - è³‡æ–™é©—è­‰è¦å‰‡
   - æ¨™ç±¤ç”Ÿæˆè¦å‰‡

---

#### **ä½¿ç”¨å ´æ™¯**

**å ´æ™¯ 1: ç”¢å“åˆ†é¡è‡ªå‹•æ¨™è¨»**
```python
# åŸå§‹è³‡æ–™
product = {
    "name": "Nature Made Vitamin D3 2000 IU",
    "category": None  # ç¼ºå¤±
}

# å……å¯¦ï¼šæ ¹æ“šç”¢å“åç¨±è‡ªå‹•åˆ†é¡
def enrich_category(product_name):
    if 'Vitamin D' in product_name:
        return 'Vitamins'
    elif 'Protein' in product_name:
        return 'Sports Nutrition'
    # ...

product['category'] = enrich_category(product['name'])
# çµæœ: {"name": "...", "category": "Vitamins"}
```

**å ´æ™¯ 2: è£œå……ç¼ºå¤±çš„å±¬æ€§è³‡è¨Š**
```python
# åŸå§‹è³‡æ–™ï¼ˆåªæœ‰å“ç‰Œ IDï¼‰
product = {
    "name": "Vitamin C",
    "brand_id": 123,
    "brand_name": None  # ç¼ºå¤±
}

# å……å¯¦ï¼šå¾å“ç‰Œè³‡æ–™è¡¨æŸ¥è©¢
brands = {123: "Nature Made", 456: "NOW Foods"}
product['brand_name'] = brands.get(product['brand_id'])
# çµæœ: {"...", "brand_name": "Nature Made"}
```

**å ´æ™¯ 3: é—œè¯å¤šå€‹è³‡æ–™æº**
```python
# ä¾†æº Aï¼šç”¢å“åŸºæœ¬è³‡æ–™
product_data = {"id": 1, "name": "Vitamin C"}

# ä¾†æº Bï¼šåƒ¹æ ¼è³‡è¨Š
price_data = {"product_id": 1, "price": 19.99}

# ä¾†æº Cï¼šåº«å­˜è³‡è¨Š
stock_data = {"product_id": 1, "stock": 50}

# å……å¯¦ï¼šåˆä½µå¤šå€‹ä¾†æº
enriched = {
    **product_data,
    "price": price_data["price"],
    "stock": stock_data["stock"]
}
```

---

#### **è³‡æ–™å……å¯¦ vs è³‡æ–™æ¸…æ´—**

| ç‰¹æ€§ | è³‡æ–™æ¸…æ´— (Cleaning) | è³‡æ–™å……å¯¦ (Enriching) |
|------|---------------------|----------------------|
| **ç›®çš„** | ä¿®æ­£éŒ¯èª¤ã€æ¨™æº–åŒ– | å¢åŠ æ–°è³‡è¨Š |
| **æ“ä½œ** | ç§»é™¤ã€æ›¿æ›ã€æ ¼å¼åŒ– | è£œå……ã€é—œè¯ã€è¨ˆç®— |
| **ç¯„ä¾‹** | ç§»é™¤é‡è¤‡ã€ä¿®æ­£æ‹¼å¯« | æ–°å¢åˆ†é¡ã€è£œå……å±¬æ€§ |
| **è³‡æ–™é‡** | ç¶­æŒæˆ–æ¸›å°‘ | å¢åŠ  |

---

### 3.3 åœ¨ LuminNexus çš„æ‡‰ç”¨

**LuminNexus è³‡æ–™æµç¨‹åœ–**

```mermaid
graph TD
    A[Shopify å•†å“é é¢] -->|Extract| B[Crawler çˆ¬èŸ²]
    B -->|Raw HTML/JSON| C[è³‡æ–™æå–]
    C -->|Transform| D[è³‡æ–™æ¸…æ´—]
    D -->|Enrich| E[åˆ†é¡æ¨™è¨»]
    E -->|Load| F[PostgreSQL]
    F --> G[Smart Insight Engine]
    G --> H[API æŸ¥è©¢ä»‹é¢]

    I[æˆåˆ†è³‡æ–™åº«] -.->|Enrich| E
    J[åˆ†é¡è¦å‰‡] -.->|Enrich| E

    style A fill:#e1f5ff
    style F fill:#e7f7e7
    style G fill:#ffe7e7
```

---

**å¯¦éš›ç¯„ä¾‹ï¼šç‡Ÿé¤Šè£œå……å“è³‡æ–™è™•ç†**

1. **Extract (æå–)**
   - Crawler å¾ Shopify æŠ“å–ç”¢å“ HTML
   - æå–ï¼šç”¢å“åç¨±ã€åƒ¹æ ¼ã€æè¿°ã€åœ–ç‰‡

2. **Transform (è½‰æ›)**
   - æ¸…æ´— HTML æ¨™ç±¤
   - å–®ä½æ¨™æº–åŒ–ï¼ˆ1000mg â†’ 1gï¼‰
   - ç§»é™¤é‡è¤‡ç”¢å“
   - æ ¼å¼åŒ–æ—¥æœŸ

3. **Enrich (å……å¯¦)**
   - æ ¹æ“šç”¢å“åç¨±è‡ªå‹•åˆ†é¡ï¼ˆVitamin, Mineral, Protein...ï¼‰
   - å¾æˆåˆ†è³‡æ–™åº«è£œå……åŠŸæ•ˆè³‡è¨Š
   - è¨ˆç®—æ€§åƒ¹æ¯” (price per serving)
   - æ¨™è¨»åŠ‘å‹ (capsule, tablet, powder)

4. **Load (è¼‰å…¥)**
   - å­˜å…¥ PostgreSQL
   - å»ºç«‹ç´¢å¼•ï¼ˆåŠ é€ŸæŸ¥è©¢ï¼‰
   - æ›´æ–° Smart Insight Engine çš„å¿«å–

---

**è³‡æ–™å……å¯¦ç¯„ä¾‹**
```python
# åŸå§‹çˆ¬èŸ²è³‡æ–™
raw_product = {
    "title": "Nature Made Vitamin D3 2000 IU Softgels",
    "price": "$12.99",
    "serving_size": "100 count"
}

# ç¶“é ETL + Enrich
enriched_product = {
    "title": "Nature Made Vitamin D3 2000 IU Softgels",
    "price": 12.99,              # è½‰æ›ç‚ºæ•¸å­—
    "currency": "USD",            # å……å¯¦
    "serving_size": 100,          # è½‰æ›ç‚ºæ•¸å­—
    "dosage": 2000,               # å¾æ¨™é¡Œæå–
    "dosage_unit": "IU",          # å¾æ¨™é¡Œæå–
    "form": "Softgel",            # å¾æ¨™é¡Œæå–
    "category": "Vitamins",       # å……å¯¦ï¼ˆè‡ªå‹•åˆ†é¡ï¼‰
    "sub_category": "Vitamin D",  # å……å¯¦
    "brand": "Nature Made",       # æå–
    "price_per_serving": 0.1299,  # è¨ˆç®—æ¬„ä½
    "created_at": "2025-11-11T00:00:00Z"  # å……å¯¦
}
```

---

## 4. å¸¸è¦‹å•é¡Œ

**Q1: JSON å’Œ CSV è©²å¦‚ä½•é¸æ“‡ï¼Ÿ**

A:
- è³‡æ–™æœ‰å·¢ç‹€çµæ§‹ â†’ JSON
- ç°¡å–®çš„è¡¨æ ¼è³‡æ–™ â†’ CSV
- éœ€è¦èˆ‡éæŠ€è¡“äººå“¡å”ä½œ â†’ CSV
- API è³‡æ–™äº¤æ› â†’ JSON

---

**Q2: ä»€éº¼æ™‚å€™éœ€è¦ä½¿ç”¨ JSON Schemaï¼Ÿ**

A:
- âœ… API è¦æ ¼å®šç¾©æ™‚
- âœ… è‡ªå‹•ç”Ÿæˆæ¸¬è©¦æ¡ˆä¾‹
- âœ… è³‡æ–™é©—è­‰éœ€æ±‚
- âœ… å¤šåœ˜éšŠå”ä½œï¼Œéœ€è¦çµ±ä¸€è¦ç¯„

---

**Q3: ETL å’Œ Enrich æœ‰ä»€éº¼å·®ç•°ï¼Ÿ**

A:
- **ETL**: è³‡æ–™æ¬ç§»çš„**å®Œæ•´æµç¨‹** (æå– â†’ è½‰æ› â†’ è¼‰å…¥)
- **Enrich**: **è½‰æ›éšæ®µå…§**çš„ä¸€ç¨®æ“ä½œï¼ˆè£œå……é¡å¤–è³‡è¨Šï¼‰
- Enrich é€šå¸¸æ˜¯ Transform æ­¥é©Ÿçš„ä¸€éƒ¨åˆ†

---

**Q4: è³‡æ–™æ¸…æ´—å’Œè³‡æ–™å……å¯¦çš„é †åºï¼Ÿ**

A:
```
1. è³‡æ–™æå– (Extract)
2. è³‡æ–™æ¸…æ´— (Clean) - å…ˆæ¸…æ´—ï¼
3. è³‡æ–™å……å¯¦ (Enrich) - åœ¨ä¹¾æ·¨çš„è³‡æ–™ä¸Šå……å¯¦
4. è³‡æ–™è¼‰å…¥ (Load)
```
å…ˆæ¸…æ´—å†å……å¯¦ï¼Œé¿å…åœ¨é«’è³‡æ–™ä¸Šæµªè²»è¨ˆç®—è³‡æºã€‚

---

## å»¶ä¼¸é–±è®€

### å…§éƒ¨è³‡æº
- [è»Ÿé«”å·¥ç¨‹å¯¦è¸ - API è¨­è¨ˆ](./03_software-engineering.md)
- [æ¸¬è©¦èˆ‡å“è³ªä¿è­‰](./04_testing-qa.md)
- [Crawler Engineer å­¸ç¿’è·¯å¾‘](../roles/crawler-engineer.md)

### å¤–éƒ¨è³‡æº
- [JSON Schema å®˜æ–¹æ–‡æª”](https://json-schema.org/)
- [SQL æ•™å­¸ - W3Schools](https://www.w3schools.com/sql/)
- [Pandas è³‡æ–™æ¸…æ´—æŒ‡å—](https://pandas.pydata.org/docs/user_guide/missing_data.html)

---

## ç‰ˆæœ¬æ­·å²

| ç‰ˆæœ¬ | æ—¥æœŸ | è®Šæ›´å…§å®¹ | ä½œè€… |
|------|------|---------|------|
| 1.0 | 2025-11-11 | åˆå§‹ç‰ˆæœ¬ï¼ŒåŒ…å«è³‡æ–™æ ¼å¼ã€è³‡æ–™åº«åŸºç¤ã€ETL èˆ‡ Enrich æµç¨‹ | Learning Team |

---

**æœ¬æ–‡æª”ç‰ˆæœ¬**: 1.0
**æœ€å¾Œæ›´æ–°**: 2025-11-11
**ç¶­è­·è€…**: LuminNexus Learning Team
